<page>
  <title>Module:Category handler/shared</title>
  <ns>828</ns>
  <id>990</id>
  <revision>
    <id>9427</id>
    <timestamp>2020-12-14T04:06:02Z</timestamp>
    <text bytes="888" space="preserve">-- This module contains shared functions used by [[Module:Category handler]]
-- and its submodules.

local p = {}

function p.matchesBlacklist(page, blacklist)
	for i, pattern in ipairs(blacklist) do
		local match = mw.ustring.match(page, pattern)
		if match then
			return true
		end
	end
	return false
end

function p.getParamMappings(useLoadData)
	local dataPage = 'Module:Namespace detect/data'
	if useLoadData then
		return mw.loadData(dataPage).mappings
	else
		return require(dataPage).mappings
	end
end

function p.getNamespaceParameters(titleObj, mappings)
	-- We don't use title.nsText for the namespace name because it adds
	-- underscores.
	local mappingsKey
	if titleObj.isTalkPage then
		mappingsKey = 'talk'
	else
		mappingsKey = mw.site.namespaces[titleObj.namespace].name
	end
	mappingsKey = mw.ustring.lower(mappingsKey)
	return mappings[mappingsKey] or {}
end

return p</text>
    <contributor>
      <username>Liczale</username>
      <id>20</id>
    </contributor>
    <comment>1 revision imported: Here you go Cate &lt;3</comment>
    <model>Scribunto</model>
    <parentid>9426</parentid>
    <sha1>d2d5de1a031e6ce97c242cbfa8afe7a92cb9eca5</sha1>
  </revision>
  <revision>
    <id>9426</id>
    <timestamp>2020-04-01T06:12:41Z</timestamp>
    <text bytes="888" space="preserve">-- This module contains shared functions used by [[Module:Category handler]]
-- and its submodules.

local p = {}

function p.matchesBlacklist(page, blacklist)
	for i, pattern in ipairs(blacklist) do
		local match = mw.ustring.match(page, pattern)
		if match then
			return true
		end
	end
	return false
end

function p.getParamMappings(useLoadData)
	local dataPage = 'Module:Namespace detect/data'
	if useLoadData then
		return mw.loadData(dataPage).mappings
	else
		return require(dataPage).mappings
	end
end

function p.getNamespaceParameters(titleObj, mappings)
	-- We don't use title.nsText for the namespace name because it adds
	-- underscores.
	local mappingsKey
	if titleObj.isTalkPage then
		mappingsKey = 'talk'
	else
		mappingsKey = mw.site.namespaces[titleObj.namespace].name
	end
	mappingsKey = mw.ustring.lower(mappingsKey)
	return mappings[mappingsKey] or {}
end

return p</text>
    <contributor>
      <username>Cleanup Template&gt;MusikAnimal</username>
      <id>0</id>
    </contributor>
    <comment>1 revision imported</comment>
    <model>Scribunto</model>
    <parentid>0</parentid>
    <sha1>d2d5de1a031e6ce97c242cbfa8afe7a92cb9eca5</sha1>
  </revision>
</page>